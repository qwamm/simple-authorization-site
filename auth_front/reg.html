<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel = "stylesheet" href = "style.css">
    <title>Registration form</title>
</head>
<body>
<h3 class = "reg">Registration</h3>
<form class = "form">
    <label for="fname">Login:</label>
    <input type="text" placeholder = "Enter text" id="login" name="login"><br><br>
    <label for="lname">Password:</label>
    <input type="text" placeholder = "Enter text" id="password" name="password"><br><br>
    <input type="submit" id = "register_button" value="Register">
</form>
<script>
    class Object {
        constructor(login, password, action) {
            this.action = action
            this.login = login
            this.password = password
        }
    }
    var user_action = 'r'
    var user_log = document.getElementById("login")
    var user_pass = document.getElementById("password")
    var register_bottom = document.getElementById('register_button')
    register_bottom.onclick = function () {
        var obj = new Object(user_log.value, user_pass.value, user_action)
        var json = JSON.stringify(obj);
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.open( "POST", 'http://localhost:8000', false ); // false for synchronous request
        xmlHttp.send( json );
        if (!xmlHttp.responseText.localeCompare('Success')) {
            //add your own path here if it's necessary
            console.log(xmlHttp.responseText);
            window.location.replace("http://127.0.0.1:8080/auth_front/success.html")
            window.location.reload()
        }
    }
</script>
</body>
</html>